---
import type { Category, Complexity } from '../data/patterns';

interface Props {
  title: string;
  slug: string;
  category: Category;
  intent: string;
  complexity: Complexity;
}

const { title, slug, category, intent, complexity } = Astro.props;

const categoryColors: Record<Category, string> = {
  creational: 'bg-amber-100 text-amber-800 dark:bg-amber-950 dark:text-amber-400',
  structural: 'bg-blue-100 text-blue-700 dark:bg-blue-950 dark:text-blue-400',
  behavioral: 'bg-emerald-100 text-emerald-700 dark:bg-emerald-950 dark:text-emerald-400',
};

const complexityColors: Record<Complexity, string> = {
  low: 'text-green-600',
  medium: 'text-yellow-600',
  high: 'text-red-500',
};

const complexityDots: Record<Complexity, number> = { low: 1, medium: 2, high: 3 };
---

<a
  href={`/patterns/${category}/${slug}/`}
  class="group block rounded-lg border border-gray-200 dark:border-gray-800 p-5 transition-all hover:border-gray-300 dark:hover:border-gray-700 hover:shadow-sm"
>
  <div class="flex items-center justify-between">
    <span class:list={['rounded-full px-2 py-0.5 text-xs font-medium capitalize', categoryColors[category]]}>
      {category}
    </span>
    <span class:list={['flex items-center gap-0.5 text-xs', complexityColors[complexity]]}>
      {Array.from({ length: 3 }).map((_, i) => (
        <span
          class:list={[
            'inline-block h-1.5 w-1.5 rounded-full',
            i < complexityDots[complexity] ? 'bg-current' : 'bg-gray-200 dark:bg-gray-700',
          ]}
        />
      ))}
    </span>
  </div>
  <h3 class="mt-3 font-semibold text-gray-900 dark:text-gray-100 group-hover:text-accent transition-colors">{title}</h3>
  <p class="mt-1 text-sm text-gray-500 dark:text-gray-400 line-clamp-2">{intent}</p>
</a>
